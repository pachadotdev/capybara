<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>apes ‚Ä¢ capybara</title><link rel="stylesheet" href="../menu.css"><link rel="stylesheet" href="../content.css"><!-- MathJax Configuration --><script>
    window.MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)'], ['$', '$']],
        displayMath: [['\\[', '\\]'], ['$$', '$$']],
        processEscapes: true,
        processEnvironments: true,
        packages: {'[+]': ['ams', 'newcommand', 'configmacros']}
      },
      options: {
        ignoreHtmlClass: 'tex2jax_ignore',
        processHtmlClass: 'tex2jax_process'
      }
    };
  </script><script id="MathJax-script" async src="../js/tex-svg.js"></script></head><body>
<div class="main-container">
<div id="menu">
  <div>
    <img src="../man/figures/logo.svg" align="center" height="139" alt="capybara logo"></div>

  <div class="search-container">
    <input type="text" id="search-box" placeholder="Search..."></div>

  <div class="search-container">
    <button id="theme-toggle" title="Toggle dark mode" aria-label="Toggle dark mode">Toggle theme</button>
    <button id="font-decrease" title="Decrease font size" aria-label="Decrease font size">A-</button>
    <button id="font-increase" title="Increase font size" aria-label="Increase font size">A+</button>
  </div>

  <div class="submenu">
    <label style="border-bottom: 0;"><a style="padding-left: 0;" href="../index.html">Home üè†</a></label>
  </div>

  <div class="submenu">
    <label>Functions</label>
    <a href="../reference/apes.html">apes</a>
    <a href="../reference/bias_corr.html">bias_corr</a>
    <a href="../reference/feglm.html">feglm</a>
    <a href="../reference/felm.html">felm</a>
    <a href="../reference/fenegbin.html">fenegbin</a>
    <a href="../reference/fepoisson.html">fepoisson</a>
    <a href="../reference/fit_control.html">fit_control</a>
    <a href="../reference/summary_table.html">summary_table</a>
  </div>

  <div class="submenu">
    <label>Vignettes</label>
    <a href="../vignettes/intro.html">Poisson Pseudo-Maximum Likelihood (PPML) Model with Cluster-Robust Standard Errors</a>
    <a href="../vignettes/separation.html">separation</a>
  </div>

  <div class="submenu">
    <label>News</label>
    <a href="../news/index.html">Changelog</a>
  </div>
</div>
<div id="content">
<div class="content-wrapper">
        <div class="content-main">

<table style="width: 100%;"><tr><td>apes {capybara}</td><td style="text-align: right;">R Documentation</td></tr></table><h2>Compute average partial effects after fitting binary choice models with a 1,2,3-way error component</h2>

<h3>Description</h3>

<p>apes is a post-estimation routine that can be used to estimate average partial effects with
respect to all covariates in the model and the corresponding covariance matrix. The estimation of the covariance is
based on a linear approximation (delta method) plus an optional finite population correction. Note that the command
automatically determines which of the regressors are binary or non-binary.
</p>
<p><strong>Remark:</strong> The routine currently does not allow to compute average partial effects based on functional forms
like interactions and polynomials.
</p>


<h3>Usage</h3>

<pre><code class="language-R">apes(
  object = NULL,
  n_pop = NULL,
  panel_structure = c("classic", "network"),
  sampling_fe = c("independence", "unrestricted"),
  weak_exo = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role="presentation"><tr><td><code id="object">object</code></td>
<td>
an object of class <code>"bias_corr"</code> or <code>"feglm"</code>; currently restricted to
binomial.
</td></tr><tr><td><code id="n_pop">n_pop</code></td>
<td>
unsigned integer indicating a finite population correction for the estimation of the covariance matrix
of the average partial effects proposed by Cruz-Gonzalez, Fern√°ndez-Val, and Weidner (2017). The correction factor
is computed as follows: <code class="reqn">(n^{\ast} - n) / (n^{\ast} - 1)</code>, where
<code class="reqn">n^{\ast}</code> and <code class="reqn">n</code> are the sizes of the entire population and the full sample size. Default is
<code>NULL</code>, which refers to a factor of zero and a covariance obtained by the delta method.
</td></tr><tr><td><code id="panel_structure">panel_structure</code></td>
<td>
a string equal to <code>"classic"</code> or <code>"network"</code> which determines the structure of the
panel used. <code>"classic"</code> denotes panel structures where for example the same cross-sectional units are observed
several times (this includes pseudo panels). <code>"network"</code> denotes panel structures where for example bilateral
trade flows are observed for several time periods. Default is <code>"classic"</code>.
</td></tr><tr><td><code id="sampling_fe">sampling_fe</code></td>
<td>
a string equal to <code>"independence"</code> or <code>"unrestricted"</code> which imposes sampling
assumptions about the unobserved effects. <code>"independence"</code> imposes that all unobserved effects are independent
sequences. <code>"unrestricted"</code> does not impose any sampling assumptions. Note that this option only affects the
optional finite population correction. Default is <code>"independence"</code>.
</td></tr><tr><td><code id="weak_exo">weak_exo</code></td>
<td>
logical indicating if some of the regressors are assumed to be weakly exogenous (e.g. predetermined).
If object is of class <code>"bias_corr"</code>, the option will be automatically set to <code>TRUE</code> if the chosen
bandwidth parameter is larger than zero. Note that this option only affects the estimation of the covariance matrix.
Default is <code>FALSE</code>, which assumes that all regressors are strictly exogenous.
</td></tr></table><h3>Value</h3>

<p>The function apes returns a named list of class <code>"apes"</code>.
</p>


<h3>References</h3>

<p>Cruz-Gonzalez, M., I. Fern√°ndez-Val, and M. Weidner (2017). "Bias corrections for probit and logit models
with two-way fixed effects". The Stata Journal, 17(3), 517-545.
</p>
<p>Czarnowske, D. and A. Stammann (2020). "Fixed Effects Binary Choice Models: Estimation and Inference with
Long Panels". ArXiv e-prints. @references Fern√°ndez-Val, I. and M. Weidner (2016). "Individual and time effects in
nonlinear panel models with large N, T". Journal of Econometrics, 192(1), 291-312.
</p>
<p>Fern√°ndez-Val, I. and M. Weidner (2018). "Fixed effects estimation of large-t panel data models". Annual
Review of Economics, 10, 109-138.
</p>
<p>Hinz, J., A. Stammann, and J. Wanner (2020). "State Dependence and Unobserved Heterogeneity in the
Extensive Margin of Trade". ArXiv e-prints.
</p>
<p>Neyman, J. and E. L. Scott (1948). "Consistent estimates based on partially consistent observations".
Econometrica, 16(1), 1-32.
</p>


<h3>See Also</h3>

<p>bias_corr and feglm
</p>


<h3>Examples</h3>

<pre><code class="language-R">mtcars2 &lt;- mtcars
mtcars2$mpg01 &lt;- ifelse(mtcars2$mpg &gt; mean(mtcars2$mpg), 1L, 0L)

# Fit 'feglm()'
mod &lt;- feglm(mpg01 ~ wt | cyl, mtcars2, family = binomial())

# Compute average partial effects
mod_ape &lt;- apes(mod)
summary(mod_ape)

# Apply analytical bias correction
mod_bc &lt;- bias_corr(mod)
summary(mod_bc)

# Compute bias-corrected average partial effects
mod_ape_bc &lt;- apes(mod_bc)
summary(mod_ape_bc)

</code></pre>


</div>
        </div>
        <footer><p id="last-updated">Loading...</p>
</footer><script src="../js/footer.js"></script><script src="../js/theme.js"></script><script src="../js/search.js"></script><script src="../js/fontsize.js"></script></div>
</div>

</body></html>

