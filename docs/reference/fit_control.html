<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Set feglm Control Parameters — fit_control • capybara</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Set feglm Control Parameters — fit_control"><meta name="description" content="Set and change parameters used for fitting feglm.
Termination conditions are similar to glm."><meta property="og:description" content="Set and change parameters used for fitting feglm.
Termination conditions are similar to glm."><meta property="og:image" content="../capybara/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">capybara</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.8.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/intro.html">Poisson Pseudo-Maximum Likelihood (PPML) Model with Cluster-Robust Standard Errors</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/pachadotdev/capybara/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Set <code>feglm</code> Control Parameters</h1>
      <small class="dont-index">Source: <a href="https://github.com/pachadotdev/capybara/blob/HEAD/R/fit_control.R"><code>R/fit_control.R</code></a></small>
      <div class="d-none name"><code>fit_control.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Set and change parameters used for fitting <code><a href="feglm.html">feglm</a></code>.
Termination conditions are similar to <code><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">fit_control</span><span class="op">(</span></span>
<span>  dev_tol <span class="op">=</span> <span class="fl">1e-08</span>,</span>
<span>  center_tol <span class="op">=</span> <span class="fl">1e-08</span>,</span>
<span>  collin_tol <span class="op">=</span> <span class="fl">1e-10</span>,</span>
<span>  step_halving_factor <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  alpha_tol <span class="op">=</span> <span class="fl">1e-08</span>,</span>
<span>  iter_max <span class="op">=</span> <span class="fl">25L</span>,</span>
<span>  iter_center_max <span class="op">=</span> <span class="fl">10000L</span>,</span>
<span>  iter_inner_max <span class="op">=</span> <span class="fl">50L</span>,</span>
<span>  iter_alpha_max <span class="op">=</span> <span class="fl">10000L</span>,</span>
<span>  iter_interrupt <span class="op">=</span> <span class="fl">1000L</span>,</span>
<span>  iter_ssr <span class="op">=</span> <span class="fl">10L</span>,</span>
<span>  step_halving_memory <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  max_step_halving <span class="op">=</span> <span class="fl">2L</span>,</span>
<span>  start_inner_tol <span class="op">=</span> <span class="fl">1e-06</span>,</span>
<span>  accel_start <span class="op">=</span> <span class="fl">6L</span>,</span>
<span>  project_tol_factor <span class="op">=</span> <span class="fl">0.001</span>,</span>
<span>  grand_accel_tol <span class="op">=</span> <span class="fl">1e-10</span>,</span>
<span>  project_group_tol <span class="op">=</span> <span class="fl">1e-12</span>,</span>
<span>  irons_tuck_tol <span class="op">=</span> <span class="fl">1e-10</span>,</span>
<span>  grand_accel_interval <span class="op">=</span> <span class="fl">5L</span>,</span>
<span>  irons_tuck_interval <span class="op">=</span> <span class="fl">3L</span>,</span>
<span>  ssr_check_interval <span class="op">=</span> <span class="fl">40L</span>,</span>
<span>  convergence_factor <span class="op">=</span> <span class="fl">1.1</span>,</span>
<span>  tol_multiplier <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  return_fe <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  keep_tx <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  init_theta <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dev-tol">dev_tol<a class="anchor" aria-label="anchor" href="#arg-dev-tol"></a></dt>
<dd><p>tolerance level for the first stopping condition of the
maximization routine. The stopping condition is based on the relative change
of the deviance in iteration \(r\) and can be expressed as follows:
\(|dev_{r} - dev_{r - 1}| / (0.1 + |dev_{r}|) &lt; tol\). The default is <code>1.0e-08</code>.</p></dd>


<dt id="arg-center-tol">center_tol<a class="anchor" aria-label="anchor" href="#arg-center-tol"></a></dt>
<dd><p>tolerance level for the stopping condition of the centering
algorithm. The stopping condition is based on the relative change of the
centered variable similar to the <code>'lfe'</code> package. The default is
<code>1.0e-08</code>.</p></dd>


<dt id="arg-collin-tol">collin_tol<a class="anchor" aria-label="anchor" href="#arg-collin-tol"></a></dt>
<dd><p>tolerance level for detecting collinearity. The default is
<code>1.0e-07</code>.</p></dd>


<dt id="arg-step-halving-factor">step_halving_factor<a class="anchor" aria-label="anchor" href="#arg-step-halving-factor"></a></dt>
<dd><p>numeric indicating the factor by which the step
size is halved to iterate towards convergence. This is used to control the
step size during optimization. The default is <code>0.5</code>.</p></dd>


<dt id="arg-alpha-tol">alpha_tol<a class="anchor" aria-label="anchor" href="#arg-alpha-tol"></a></dt>
<dd><p>tolerance for fixed effects (alpha) convergence.
The default is <code>1.0e-06</code>.</p></dd>


<dt id="arg-iter-max">iter_max<a class="anchor" aria-label="anchor" href="#arg-iter-max"></a></dt>
<dd><p>unsigned integer indicating the maximum number of iterations
in the maximization routine. The default is <code>25L</code>.</p></dd>


<dt id="arg-iter-center-max">iter_center_max<a class="anchor" aria-label="anchor" href="#arg-iter-center-max"></a></dt>
<dd><p>unsigned integer indicating the maximum number of
iterations in the centering algorithm. The default is <code>10000L</code>.</p></dd>


<dt id="arg-iter-inner-max">iter_inner_max<a class="anchor" aria-label="anchor" href="#arg-iter-inner-max"></a></dt>
<dd><p>unsigned integer indicating the maximum number of
iterations in the inner loop of the centering algorithm. The default is
<code>50L</code>.</p></dd>


<dt id="arg-iter-alpha-max">iter_alpha_max<a class="anchor" aria-label="anchor" href="#arg-iter-alpha-max"></a></dt>
<dd><p>maximum iterations for fixed effects computation.
The default is <code>10000L</code>.</p></dd>


<dt id="arg-iter-interrupt">iter_interrupt<a class="anchor" aria-label="anchor" href="#arg-iter-interrupt"></a></dt>
<dd><p>unsigned integer indicating the maximum number of
iterations before the algorithm is interrupted. The default is <code>1000L</code>.</p></dd>


<dt id="arg-iter-ssr">iter_ssr<a class="anchor" aria-label="anchor" href="#arg-iter-ssr"></a></dt>
<dd><p>unsigned integer indicating the number of iterations
to skip before checking if the sum of squared residuals improves. The default
is <code>10L</code>.</p></dd>


<dt id="arg-step-halving-memory">step_halving_memory<a class="anchor" aria-label="anchor" href="#arg-step-halving-memory"></a></dt>
<dd><p>numeric memory factor for step-halving algorithm.
Controls how much of the previous iteration is retained. The default is <code>0.9</code>.</p></dd>


<dt id="arg-max-step-halving">max_step_halving<a class="anchor" aria-label="anchor" href="#arg-max-step-halving"></a></dt>
<dd><p>maximum number of post-convergence step-halving attempts.
The default is <code>2</code>.</p></dd>


<dt id="arg-start-inner-tol">start_inner_tol<a class="anchor" aria-label="anchor" href="#arg-start-inner-tol"></a></dt>
<dd><p>starting tolerance for inner solver iterations.
The default is <code>1.0e-04</code>.</p></dd>


<dt id="arg-accel-start">accel_start<a class="anchor" aria-label="anchor" href="#arg-accel-start"></a></dt>
<dd><p>Integer. Iteration to start conjugate gradient acceleration in centering.
The default is <code>6L</code>.</p></dd>


<dt id="arg-project-tol-factor">project_tol_factor<a class="anchor" aria-label="anchor" href="#arg-project-tol-factor"></a></dt>
<dd><p>Factor to multiply center_tol for projection tolerance.
The default is <code>1e-3</code>.</p></dd>


<dt id="arg-grand-accel-tol">grand_accel_tol<a class="anchor" aria-label="anchor" href="#arg-grand-accel-tol"></a></dt>
<dd><p>Tolerance for grand acceleration convergence.
The default is <code>1e-10</code>.</p></dd>


<dt id="arg-project-group-tol">project_group_tol<a class="anchor" aria-label="anchor" href="#arg-project-group-tol"></a></dt>
<dd><p>Tolerance for individual group projections.
The default is <code>1e-12</code>.</p></dd>


<dt id="arg-irons-tuck-tol">irons_tuck_tol<a class="anchor" aria-label="anchor" href="#arg-irons-tuck-tol"></a></dt>
<dd><p>Tolerance for Irons-Tuck acceleration.
The default is <code>1e-10</code>.</p></dd>


<dt id="arg-grand-accel-interval">grand_accel_interval<a class="anchor" aria-label="anchor" href="#arg-grand-accel-interval"></a></dt>
<dd><p>Interval for applying grand acceleration.
The default is <code>5L</code>.</p></dd>


<dt id="arg-irons-tuck-interval">irons_tuck_interval<a class="anchor" aria-label="anchor" href="#arg-irons-tuck-interval"></a></dt>
<dd><p>Interval for applying Irons-Tuck acceleration.
The default is <code>3L</code>.</p></dd>


<dt id="arg-ssr-check-interval">ssr_check_interval<a class="anchor" aria-label="anchor" href="#arg-ssr-check-interval"></a></dt>
<dd><p>Interval for adaptive SSR convergence checks.
The default is <code>40L</code>.</p></dd>


<dt id="arg-convergence-factor">convergence_factor<a class="anchor" aria-label="anchor" href="#arg-convergence-factor"></a></dt>
<dd><p>Factor for detecting slow convergence.
The default is <code>1.1</code>.</p></dd>


<dt id="arg-tol-multiplier">tol_multiplier<a class="anchor" aria-label="anchor" href="#arg-tol-multiplier"></a></dt>
<dd><p>Multiplier for early termination tolerance check.
The default is <code>20.0</code>.</p></dd>


<dt id="arg-return-fe">return_fe<a class="anchor" aria-label="anchor" href="#arg-return-fe"></a></dt>
<dd><p>logical indicating if the fixed effects should be returned.
This can be useful when fitting general equilibrium models where skipping the
fixed effects for intermediate steps speeds up computation. The default is
<code>TRUE</code> and only applies to the <code>feglm</code> class.</p></dd>


<dt id="arg-keep-tx">keep_tx<a class="anchor" aria-label="anchor" href="#arg-keep-tx"></a></dt>
<dd><p>logical indicating if the centered regressor matrix should be
stored. The centered regressor matrix is required for some covariance
estimators, bias corrections, and average partial effects. This option saves
some computation time at the cost of memory. The default is <code>TRUE</code>.</p></dd>


<dt id="arg-init-theta">init_theta<a class="anchor" aria-label="anchor" href="#arg-init-theta"></a></dt>
<dd><p>Initial value for the negative binomial dispersion parameter (theta).
The default is <code>0.0</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A named list of control parameters.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="feglm.html">feglm</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">fit_control</span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.05</span>, <span class="fl">10L</span>, <span class="fl">10L</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $dev_tol</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $center_tol</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $collin_tol</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $step_halving_factor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $alpha_tol</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $iter_max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $iter_center_max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $iter_inner_max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $iter_alpha_max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 10000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $iter_interrupt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $iter_ssr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $step_halving_memory</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $max_step_halving</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $start_inner_tol</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1e-06</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $accel_start</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $project_tol_factor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $grand_accel_tol</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1e-10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $project_group_tol</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1e-12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $irons_tuck_tol</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1e-10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $grand_accel_interval</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $irons_tuck_interval</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ssr_check_interval</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 40</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $convergence_factor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $tol_multiplier</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $return_fe</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $keep_tx</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $init_theta</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mauricio Vargas Sepulveda.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

