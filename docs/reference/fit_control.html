<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>fit_control ‚Ä¢ capybara</title><link rel="stylesheet" href="../menu.css"><link rel="stylesheet" href="../content.css"><!-- MathJax Configuration --><script>
    window.MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)'], ['$', '$']],
        displayMath: [['\\[', '\\]'], ['$$', '$$']],
        processEscapes: true,
        processEnvironments: true,
        packages: {'[+]': ['ams', 'newcommand', 'configmacros']}
      },
      options: {
        ignoreHtmlClass: 'tex2jax_ignore',
        processHtmlClass: 'tex2jax_process'
      }
    };
  </script><script id="MathJax-script" async src="../js/tex-svg.js"></script></head><body>
<div class="main-container">
<div id="menu">
  <div>
    <img src="../man/figures/logo.svg" align="center" height="139" alt="capybara logo"></div>

  <div class="search-container">
    <input type="text" id="search-box" placeholder="Search..."></div>

  <div class="search-container">
    <button id="theme-toggle" title="Toggle dark mode" aria-label="Toggle dark mode">Toggle theme</button>
    <button id="font-decrease" title="Decrease font size" aria-label="Decrease font size">A-</button>
    <button id="font-increase" title="Increase font size" aria-label="Increase font size">A+</button>
  </div>

  <div class="submenu">
    <label style="border-bottom: 0;"><a style="padding-left: 0;" href="../index.html">Home üè†</a></label>
  </div>

  <div class="submenu">
    <label>Functions</label>
    <a href="../reference/apes.html">apes</a>
    <a href="../reference/bias_corr.html">bias_corr</a>
    <a href="../reference/feglm.html">feglm</a>
    <a href="../reference/felm.html">felm</a>
    <a href="../reference/fenegbin.html">fenegbin</a>
    <a href="../reference/fepoisson.html">fepoisson</a>
    <a href="../reference/fit_control.html">fit_control</a>
    <a href="../reference/summary_table.html">summary_table</a>
  </div>

  <div class="submenu">
    <label>Vignettes</label>
    <a href="../vignettes/intro.html">Poisson Pseudo-Maximum Likelihood (PPML) Model with Cluster-Robust Standard Errors</a>
    <a href="../vignettes/separation.html">Nonexistence of estimates of Poisson models</a>
  </div>

  <div class="submenu">
    <label>News</label>
    <a href="../news/index.html">Changelog</a>
  </div>
</div>
<div id="content">
<div class="content-wrapper">
        <div class="content-main">

<table style="width: 100%;"><tr><td>fit_control {capybara}</td><td style="text-align: right;">R Documentation</td></tr></table><h2>Set <code>feglm</code> Control Parameters</h2>

<h3>Description</h3>

<p>Set and change parameters used for fitting feglm, felm, and fenegbin. Termination
conditions are similar to glm.
</p>


<h3>Usage</h3>

<pre><code class="language-R">fit_control(
  dev_tol = 1e-08,
  center_tol = 1e-06,
  center_tol_loose = 1e-04,
  collin_tol = 1e-10,
  step_halving_factor = 0.5,
  alpha_tol = 1e-08,
  iter_max = 25L,
  iter_center_max = 10000L,
  iter_inner_max = 50L,
  iter_alpha_max = 10000L,
  step_halving_memory = 0.9,
  max_step_halving = 2L,
  start_inner_tol = 1e-06,
  grand_acc_period = 4L,
  centering = "berge",
  sep_tol = 1e-08,
  sep_zero_tol = 1e-12,
  sep_max_iter = 200L,
  sep_simplex_max_iter = 2000L,
  sep_use_relu = TRUE,
  sep_use_simplex = TRUE,
  return_fe = TRUE,
  keep_tx = FALSE,
  check_separation = TRUE,
  init_theta = 0,
  vcov_type = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role="presentation"><tr><td><code id="dev_tol">dev_tol</code></td>
<td>
tolerance level for the first stopping condition of the maximization routine. The stopping condition
is based on the relative change of the deviance in iteration <code class="reqn">r</code> and can be expressed as follows: <code class="reqn">|dev_{r}
 - dev_{r - 1}| / (0.1 + |dev_{r}|) &lt; tol</code>. The default is <code>1.0e-08</code>.
</td></tr><tr><td><code id="center_tol">center_tol</code></td>
<td>
tolerance level for the stopping condition of the centering algorithm. The stopping condition is
based on the relative change of the centered variable similar to the <code>'lfe'</code> package. The default is
<code>1.0e-06</code>.
</td></tr><tr><td><code id="center_tol_loose">center_tol_loose</code></td>
<td>
initial (loose) tolerance for adaptive centering in GLM iterations. During early IRLS
iterations when deviance is changing rapidly, this looser tolerance is used to save computation. As the GLM
converges, the tolerance is tightened towards <code>center_tol</code>. The default is <code>1.0e-04</code>.
</td></tr><tr><td><code id="collin_tol">collin_tol</code></td>
<td>
tolerance level for detecting collinearity. The default is <code>1.0e-07</code>.
</td></tr><tr><td><code id="step_halving_factor">step_halving_factor</code></td>
<td>
numeric indicating the factor by which the step size is halved to iterate towards
convergence. This is used to control the step size during optimization. The default is <code>0.5</code>.
</td></tr><tr><td><code id="alpha_tol">alpha_tol</code></td>
<td>
tolerance for fixed effects (alpha) convergence. The default is <code>1.0e-06</code>.
</td></tr><tr><td><code id="iter_max">iter_max</code></td>
<td>
integer indicating the maximum number of iterations in the maximization routine. The default is
<code>25L</code>.
</td></tr><tr><td><code id="iter_center_max">iter_center_max</code></td>
<td>
integer indicating the maximum number of iterations in the centering algorithm. The default is
<code>10000L</code>.
</td></tr><tr><td><code id="iter_inner_max">iter_inner_max</code></td>
<td>
integer indicating the maximum number of iterations in the inner loop of the centering
algorithm. The default is <code>50L</code>.
</td></tr><tr><td><code id="iter_alpha_max">iter_alpha_max</code></td>
<td>
maximum iterations for fixed effects computation. The default is <code>10000L</code>.
</td></tr><tr><td><code id="step_halving_memory">step_halving_memory</code></td>
<td>
numeric memory factor for step-halving algorithm. Controls how much of the previous
iteration is retained. The default is <code>0.9</code>.
</td></tr><tr><td><code id="max_step_halving">max_step_halving</code></td>
<td>
maximum number of post-convergence step-halving attempts. The default is <code>2</code>.
</td></tr><tr><td><code id="start_inner_tol">start_inner_tol</code></td>
<td>
starting tolerance for inner solver iterations. The default is <code>1.0e-04</code>.
</td></tr><tr><td><code id="grand_acc_period">grand_acc_period</code></td>
<td>
integer indicating the period (in iterations) for grand acceleration in the centering
algorithm. Grand acceleration applies a second-level Irons-Tuck extrapolation on the overall convergence
trajectory. Lower values (e.g., 4-10) may speed up convergence for difficult problems. Set to a very large
value (e.g., 10000) to effectively disable. The default is <code>4L</code>.
</td></tr><tr><td><code id="centering">centering</code></td>
<td>
character string indicating the centering algorithm to use for demeaning fixed effects.
<code>"stammann"</code> (default) uses alternating projections with Gauss-Seidel sweeps plus Irons-Tuck and grand
acceleration on coefficient vectors. Each iteration updates each fixed-effect dimension in sequence.
<code>"berge"</code> uses a fixed-point reformulation as described in Berge (2018): all FE updates are composed
into a single map <code class="reqn">F = f_T \circ f_I</code>, reducing the problem to finding <code class="reqn">\beta^* = F(\beta^*)</code>. The
Irons and Tuck (1969) acceleration is then applied to the composed iteration. Both methods use warm-starting
and grand acceleration.
</td></tr><tr><td><code id="sep_tol">sep_tol</code></td>
<td>
tolerance for separation detection. The default is <code>1.0e-08</code>.
</td></tr><tr><td><code id="sep_zero_tol">sep_zero_tol</code></td>
<td>
tolerance for treating values as zero in separation detection. The default is <code>1.0e-12</code>.
</td></tr><tr><td><code id="sep_max_iter">sep_max_iter</code></td>
<td>
maximum iterations for ReLU separation detection algorithm. The default is <code>200L</code>.
</td></tr><tr><td><code id="sep_simplex_max_iter">sep_simplex_max_iter</code></td>
<td>
maximum iterations for simplex separation detection algorithm. The default is <code>2000L</code>.
</td></tr><tr><td><code id="sep_use_relu">sep_use_relu</code></td>
<td>
logical indicating whether to use the ReLU algorithm for separation detection. The default is <code>TRUE</code>.
</td></tr><tr><td><code id="sep_use_simplex">sep_use_simplex</code></td>
<td>
logical indicating whether to use the simplex algorithm for separation detection. The default is <code>TRUE</code>.
</td></tr><tr><td><code id="return_fe">return_fe</code></td>
<td>
logical indicating if the fixed effects should be returned. This can be useful when fitting general
equilibrium models where skipping the fixed effects for intermediate steps speeds up computation. The default is
<code>TRUE</code> and only applies to the <code>feglm</code> class.
</td></tr><tr><td><code id="keep_tx">keep_tx</code></td>
<td>
logical indicating if the centered regressor matrix should be stored. The centered regressor matrix is
required for some covariance estimators, bias corrections, and average partial effects. This option saves
some computation time at the cost of memory. The default is <code>TRUE</code>.
</td></tr><tr><td><code id="check_separation">check_separation</code></td>
<td>
logical indicating whether to perform separation detection for Poisson models. When <code>TRUE</code>
(default), observations with perfect prediction are automatically detected and excluded from estimation. Set to
<code>FALSE</code> to skip this check and speed up computation when separation is known not to be an issue. The default
is <code>TRUE</code>.
</td></tr><tr><td><code id="init_theta">init_theta</code></td>
<td>
Initial value for the negative binomial dispersion parameter (theta). The default is <code>0.0</code>.
</td></tr><tr><td><code id="vcov_type">vcov_type</code></td>
<td>
Optional character string specifying the type of variance-covariance estimator to be used. It only
applies for formulas with a cluster variable like <code>z ~ x + y | fe | cl</code>. When <code>NULL</code> (default), the variance
covariance matrix follows a regular sandwich estimator. When set to <code>"m-estimator"</code>, uses standard clustered
M-estimator sandwich. When set to <code>"m-estimator-dyadic"</code>, uses dyadic clustering that accounts for correlation
between observations sharing entities. For dyadic clustering, specify two entity columns in the formula like
<code>z ~ x + y | fe | cl1 + cl2</code>.
</td></tr></table><h3>Value</h3>

<p>A named list of control parameters.
</p>


<h3>See Also</h3>

<p>feglm, felm, and fenegbin
</p>


<h3>Examples</h3>

<pre><code class="language-R">fit_control(0.05, 0.05, 10L, 10L, TRUE, TRUE, TRUE)

</code></pre>


</div>
        </div>
        <footer><p id="last-updated">Loading...</p>
</footer><script src="../js/footer.js"></script><script src="../js/theme.js"></script><script src="../js/search.js"></script><script src="../js/fontsize.js"></script></div>
</div>

</body></html>

