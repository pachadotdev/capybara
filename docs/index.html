<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Fast and Memory Efficient Fitting of Linear Models with High-Dimensional Fixed Effects • capybara</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Fast and Memory Efficient Fitting of Linear Models with High-Dimensional Fixed Effects">
<meta name="description" content="Fast and user-friendly estimation of generalized linear models with multiple fixed effects and cluster the standard errors. The method to obtain the estimated fixed-effects coefficients is based on Stammann (2018) &lt;doi:10.48550/arXiv.1707.01815&gt; and Gaure (2013) &lt;doi:10.1016/j.csda.2013.03.024&gt;.">
<meta property="og:description" content="Fast and user-friendly estimation of generalized linear models with multiple fixed effects and cluster the standard errors. The method to obtain the estimated fixed-effects coefficients is based on Stammann (2018) &lt;doi:10.48550/arXiv.1707.01815&gt; and Gaure (2013) &lt;doi:10.1016/j.csda.2013.03.024&gt;.">
<meta property="og:image" content="../capybara/logo.svg">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">capybara</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/intro.html">Poisson Pseudo-Maximum Likelihood (PPML) Model with Cluster-Robust Standard Errors</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/pachadotdev/capybara/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.svg" class="logo" alt=""><h1 id="capybara-">capybara <a class="anchor" aria-label="anchor" href="#capybara-"></a>
</h1>
</div>
<!-- badges: start -->
<div class="section level2">
<h2 id="about">About<a class="anchor" aria-label="anchor" href="#about"></a>
</h2>
<p>tldr; If you have a 2-4GB dataset and you need to estimate a (generalized) linear model with a large number of fixed effects, this package is for you. It works with larger datasets as well and facilites computing clustered standard errors.</p>
<p>‘capybara’ is a fast and small footprint software that provides efficient functions for demeaning variables before conducting a GLM estimation. This technique is particularly useful when estimating linear models with multiple group fixed effects. It is a fork of the excellent Alpaca package created and maintained by <a href="https://github.com/amrei-stammann" class="external-link">Dr. Amrei Stammann</a>. The software can estimate Exponential Family models (e.g., Poisson) and Negative Binomial models.</p>
<p>Traditional QR estimation can be unfeasible due to additional memory requirements. The method, which is based on Halperin (1962) vector projections offers important time and memory savings without compromising numerical stability in the estimation process.</p>
<p>The software heavily borrows from Gaure (2013) and Stammann (2018) works on OLS and GLM estimation with large fixed effects implemented in the ‘lfe’ and ‘alpaca’ packages. The differences are that ‘capybara’ does not use C nor Rcpp code, instead it uses cpp11 and <a href="https://github.com/pachadotdev/cpp11armadillo" class="external-link">cpp11armadillo</a>.</p>
<p>The summary tables borrow from Stata outputs. I have also provided integrations with ‘broom’ to facilitate the inclusion of statistical tables in Quarto/Jupyter notebooks.</p>
<p>If this software is useful to you, please consider donating on <a href="https://buymeacoffee.com/pacha" class="external-link">Buy Me A Coffee</a>. All donations will be used to continue improving <code>capybara</code>.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of capybara like so:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"pachadotdev/capybara"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<p>See the documentation in progress: <a href="https://pacha.dev/capybara/" class="uri">https://pacha.dev/capybara/</a>.</p>
</div>
<div class="section level2">
<h2 id="design-choices">Design choices<a class="anchor" aria-label="anchor" href="#design-choices"></a>
</h2>
<p>Capybara is full of trade-offs. I have used ‘data.table’ to benefit from in-place modifications. The model fitting is done on C++ side. While the code aims to be fast, I prefer to have some bottlenecks instead of low numerical stability. The principle was: “He who gives up code safety for code speed deserves neither.” (Wickham, 2014).</p>
</div>
<div class="section level2">
<h2 id="benchmarks">Benchmarks<a class="anchor" aria-label="anchor" href="#benchmarks"></a>
</h2>
<p>Median time and memory footprint for the different models in the book <a href="https://www.wto.org/english/res_e/publications_e/advancedguide2016_e.htm" class="external-link">An Advanced Guide to Trade Policy Analysis</a>.</p>
<table class="table">
<thead><tr class="header">
<th align="left">Model</th>
<th align="left">Package</th>
<th align="left">Median Time</th>
<th align="left">Memory</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">PPML</td>
<td align="left">Alpaca</td>
<td align="left">822.14 ms - 3</td>
<td align="left">302.62 MB - 3</td>
</tr>
<tr class="even">
<td align="left">PPML</td>
<td align="left">Base R</td>
<td align="left">45.43 s - 4</td>
<td align="left">2.73 GB - 4</td>
</tr>
<tr class="odd">
<td align="left">PPML</td>
<td align="left">Capybara</td>
<td align="left">404.27 ms - 2</td>
<td align="left">23.91 MB - 1</td>
</tr>
<tr class="even">
<td align="left">PPML</td>
<td align="left">Fixest</td>
<td align="left">140.87 ms - 1</td>
<td align="left">44.59 MB - 2</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Trade Diversion</td>
<td align="left">Alpaca</td>
<td align="left">3.73 s - 3</td>
<td align="left">339.79 MB - 3</td>
</tr>
<tr class="odd">
<td align="left">Trade Diversion</td>
<td align="left">Base R</td>
<td align="left">45.91 s - 4</td>
<td align="left">2.6 GB - 4</td>
</tr>
<tr class="even">
<td align="left">Trade Diversion</td>
<td align="left">Capybara</td>
<td align="left">929.89 ms - 1</td>
<td align="left">30.77 MB - 1</td>
</tr>
<tr class="odd">
<td align="left">Trade Diversion</td>
<td align="left">Fixest</td>
<td align="left">1.01 s - 2</td>
<td align="left">36.59 MB - 2</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Endogeneity</td>
<td align="left">Alpaca</td>
<td align="left">2.9 s - 3</td>
<td align="left">306.27 MB - 3</td>
</tr>
<tr class="even">
<td align="left">Endogeneity</td>
<td align="left">Base R</td>
<td align="left">12.19 m - 4</td>
<td align="left">11.94 GB - 4</td>
</tr>
<tr class="odd">
<td align="left">Endogeneity</td>
<td align="left">Capybara</td>
<td align="left">1.3 s - 2</td>
<td align="left">16.81 MB - 1</td>
</tr>
<tr class="even">
<td align="left">Endogeneity</td>
<td align="left">Fixest</td>
<td align="left">247.72 ms - 1</td>
<td align="left">28.08 MB - 2</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Reverse Causality</td>
<td align="left">Alpaca</td>
<td align="left">3.7 s - 3</td>
<td align="left">335.61 MB - 3</td>
</tr>
<tr class="odd">
<td align="left">Reverse Causality</td>
<td align="left">Base R</td>
<td align="left">12.23 m - 4</td>
<td align="left">11.94 GB - 4</td>
</tr>
<tr class="even">
<td align="left">Reverse Causality</td>
<td align="left">Capybara</td>
<td align="left">1.36 s - 2</td>
<td align="left">19.86 MB - 1</td>
</tr>
<tr class="odd">
<td align="left">Reverse Causality</td>
<td align="left">Fixest</td>
<td align="left">329.78 ms - 1</td>
<td align="left">32.43 MB - 2</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Phasing Effects</td>
<td align="left">Alpaca</td>
<td align="left">4.78 s - 3</td>
<td align="left">393.86 MB - 3</td>
</tr>
<tr class="even">
<td align="left">Phasing Effects</td>
<td align="left">Base R</td>
<td align="left">12.18 m - 4</td>
<td align="left">11.95 GB - 4</td>
</tr>
<tr class="odd">
<td align="left">Phasing Effects</td>
<td align="left">Capybara</td>
<td align="left">1.49 s - 2</td>
<td align="left">25.95 MB - 1</td>
</tr>
<tr class="even">
<td align="left">Phasing Effects</td>
<td align="left">Fixest</td>
<td align="left">525.04 ms - 1</td>
<td align="left">41.12 MB - 2</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Globalization</td>
<td align="left">Alpaca</td>
<td align="left">7.97 s - 3</td>
<td align="left">539.49 MB - 3</td>
</tr>
<tr class="odd">
<td align="left">Globalization</td>
<td align="left">Base R</td>
<td align="left">11.59 m - 4</td>
<td align="left">11.97 GB - 4</td>
</tr>
<tr class="even">
<td align="left">Globalization</td>
<td align="left">Capybara</td>
<td align="left">1.94 s - 2</td>
<td align="left">41.19 MB - 1</td>
</tr>
<tr class="odd">
<td align="left">Globalization</td>
<td align="left">Fixest</td>
<td align="left">914.51 ms - 1</td>
<td align="left">62.87 MB - 2</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="changing-the-number-of-cores">Changing the number of cores<a class="anchor" aria-label="anchor" href="#changing-the-number-of-cores"></a>
</h2>
<p>Note that you can edit the <code>Makevars</code> file to change the number of cores that capybara uses, here is an example of how it affects the performance</p>
<table class="table">
<thead><tr class="header">
<th align="left">cores</th>
<th align="right">PPML</th>
<th align="right">Trade Diversion</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2</td>
<td align="right">1.8s</td>
<td align="right">16.2s</td>
</tr>
<tr class="even">
<td align="left">4</td>
<td align="right">1.5s</td>
<td align="right">14.0s</td>
</tr>
<tr class="odd">
<td align="left">6</td>
<td align="right">0.8s</td>
<td align="right">2.4s</td>
</tr>
<tr class="even">
<td align="left">8</td>
<td align="right">0.4s</td>
<td align="right">0.9s</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2"><h2 id="testing-and-debugging">Testing and debugging<a class="anchor" aria-label="anchor" href="#testing-and-debugging"></a>
</h2></div>
<div class="section level2">
<h2 id="testing">Testing<a class="anchor" aria-label="anchor" href="#testing"></a>
</h2>
<p>I use <code>testthat</code> (e.g., <code><a href="https://devtools.r-lib.org/reference/test.html" class="external-link">devtools::test()</a></code>) to compare the results with base R. These tests are about the correctness of the results.</p>
<div class="section level3">
<h3 id="debuging">Debuging<a class="anchor" aria-label="anchor" href="#debuging"></a>
</h3>
<p>I run <code>r_valgrind "dev/valgrind-kendall-correlation.r"</code> or the corresponding test from the project’s root in a new terminal (bash) after running <code><a href="https://devtools.r-lib.org/reference/install.html" class="external-link">devtools::install()</a></code>. These tests are about memory leaks (e.g., I use repeteated computations and sometimes things such as “pi = 3”).</p>
<p>This works because I previously defined this in <code>.bashrc</code>, to make it work you need to run <code>source ~/.bashrc</code> or reboot your computer.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="cf">function</span> <span class="kw">r_debug_symbols</span> () {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a>    <span class="co"># if src/Makevars does not exist, exit</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a>    <span class="cf">if</span> [ <span class="op">!</span><span class="st"> </span><span class="op">-</span>f src<span class="op">/</span>Makevars ]; then</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a>        echo <span class="st">"File src/Makevars does not exist"</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a>        return <span class="dv">1</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a>    fi</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true"></a>    <span class="co"># if src/Makevars contains a line that says "PKG_CPPFLAGS"</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true"></a>    <span class="co"># but there is no "-UDEBUG -g" on it</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true"></a>    <span class="co"># then add "PKG_CPPFLAGS += -UDEBUG -g" at the end</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true"></a>    <span class="cf">if</span> grep <span class="op">-</span>q <span class="st">"PKG_CPPFLAGS"</span> src<span class="op">/</span>Makevars; then</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true"></a>        <span class="cf">if</span> <span class="op">!</span><span class="st"> </span>grep <span class="op">-</span>q <span class="st">"PKG_CPPFLAGS.*-UDEBUG.*-g"</span> src<span class="op">/</span>Makevars; then</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true"></a>            echo <span class="st">"PKG_CPPFLAGS += -UDEBUG -g"</span> <span class="op">&gt;</span><span class="er">&gt;</span><span class="st"> </span>src<span class="op">/</span>Makevars</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true"></a>        fi</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true"></a>    fi</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true"></a>    <span class="co"># if src/Makevars does not contain a line that reads</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true"></a>    <span class="co"># PKG_CPPFLAGS ...something... -UDEBUG -g ...something...</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true"></a>    <span class="co"># then add PKG_CPPFLAGS = -UDEBUG -g to it</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true"></a>    <span class="cf">if</span> <span class="op">!</span><span class="st"> </span>grep <span class="op">-</span>q <span class="st">"PKG_CPPFLAGS.*-UDEBUG.*-g"</span> src<span class="op">/</span>Makevars; then</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true"></a>        echo <span class="st">"PKG_CPPFLAGS = -UDEBUG -g"</span> <span class="op">&gt;</span><span class="er">&gt;</span><span class="st"> </span>src<span class="op">/</span>Makevars</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true"></a>    fi</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true"></a>}</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true"></a></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true"></a><span class="cf">function</span> <span class="kw">r_valgrind</span> () {</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true"></a>    <span class="co"># if no argument is provided, ask for a file</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true"></a>    <span class="cf">if</span> [ <span class="op">-</span>z <span class="st">"$1"</span> ]; then</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true"></a>        read <span class="op">-</span>p <span class="st">"Enter the script to debug: "</span> script</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true"></a>    <span class="cf">else</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true"></a>        script=<span class="er">$</span><span class="dv">1</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true"></a>    fi</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true"></a></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true"></a>    <span class="co"># if no output file is provided, use the same filename but ended in txt</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true"></a>    <span class="cf">if</span> [ <span class="op">-</span>z <span class="st">"$2"</span> ]; then</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true"></a>        output=<span class="st">"${script%.*}.txt"</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true"></a>    <span class="cf">else</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true"></a>        output=<span class="er">$</span><span class="dv">2</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true"></a>    fi</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true"></a></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true"></a>    <span class="co"># if the file does not exist, exit</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true"></a>    <span class="cf">if</span> [ <span class="op">!</span><span class="st"> </span><span class="op">-</span>f <span class="st">"$script"</span> ]; then</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true"></a>        echo <span class="st">"File $script does not exist"</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true"></a>        return <span class="dv">1</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true"></a>    fi</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true"></a></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true"></a>    <span class="co"># if the file does not end in .R/.r, exit</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true"></a>    shopt <span class="op">-</span>s nocasematch</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true"></a>    <span class="cf">if</span> [[ <span class="st">"$script"</span> <span class="op">!=</span><span class="st"> </span><span class="er">*</span>.R ]]; then</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true"></a>        echo <span class="st">"File $script does not end in .R or .r"</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true"></a>        return <span class="dv">1</span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true"></a>    fi</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true"></a>    shopt <span class="op">-</span>u nocasematch</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true"></a></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true"></a>    <span class="co"># run R in debug mode, but after that we compiled with debug symbols</span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true"></a>    <span class="co"># see https://reside-ic.github.io/blog/debugging-memory-errors-with-valgrind-and-gdb/</span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true"></a>    <span class="co"># R -d 'valgrind -s --leak-check=full --show-leak-kinds=all --track-origins=yes' -f $script 2&gt;&amp;1 | tee valgrind.txt</span></span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true"></a>    R <span class="op">--</span>vanilla <span class="op">-</span>d <span class="st">'valgrind -s --track-origins=yes'</span> <span class="op">-</span>f <span class="op">$</span>script <span class="dv">2</span><span class="op">&gt;</span><span class="er">&amp;</span><span class="dv">1</span> <span class="op">|</span><span class="st"> </span>tee <span class="op">$</span>output</span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true"></a>}</span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true"></a></span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true"></a><span class="co"># create an alias for R</span></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true"></a>alias r=<span class="st">"R"</span></span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true"></a>alias rvalgrind=<span class="st">"R --vanilla -d 'valgrind -s --track-origins=yes'"</span></span></code></pre></div>
<p><code>r_debug_symbols</code> makes everything slower, but makes sure that all compiler optimizations are disabled and then valgrind will point us to the lines that create memory leaks.</p>
<p><code>r_valgrind</code> will run an R script and use Linux system tools to test for initialized values and all kinds of problems that result in memory leaks.</p>
<p>When you are ready testing, you need to remove <code>-UDEBUG</code> from <code>src/Makevars</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="code-of-conduct">Code of Conduct<a class="anchor" aria-label="anchor" href="#code-of-conduct"></a>
</h2>
<p>Please note that the capybara project is released with a <a href="https://contributor-covenant.org/version/2/1/CODE_OF_CONDUCT.html" class="external-link">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
<div class="section level2">
<h2 id="acknowledgements">Acknowledgements<a class="anchor" aria-label="anchor" href="#acknowledgements"></a>
</h2>
<p>Thanks a lot to <a href="https://yotoyotov.com/" class="external-link">Prof. Yoto Yotov</a> for reviewing the summary functions.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=capybara" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/pachadotdev/capybara/">Browse source code</a></li>
<li><a href="https://github.com/pachadotdev/capybara/issues">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>Apache License (&gt;= 2)</small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing capybara</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Mauricio Vargas Sepulveda <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-1017-7574" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/pachadotdev/capybara/actions/workflows/R-CMD-check.yaml"><img src="https://github.com/pachadotdev/capybara/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/pachadotdev/capybara"><img src="https://app.codecov.io/gh/pachadotdev/capybara/graph/badge.svg?token=kDP0pWmfRk" alt="codecov"></a></li>
<li><a href="https://buymeacoffee.com/pacha" class="external-link"><img src="https://raw.githubusercontent.com/pachadotdev/buymeacoffee-badges/main/bmc-donate-yellow.svg" alt="BuyMeACoffee"></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="Lifecycle: stable"></a></li>
<li><a href="https://CRAN.R-project.org/package=capybara" class="external-link"><img src="https://www.r-pkg.org/badges/version/capybara" alt="CRAN status"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mauricio Vargas Sepulveda.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
